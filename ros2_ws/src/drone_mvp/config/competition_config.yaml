# Competition Configuration for KAERTEI 2025
competition:
  name: "KAERTEI 2025"
  division: "Fully Autonomous Indoor-Outdoor (FAIO)" 
  team_name: "SET_YOUR_TEAM_NAME"
  drone_id: "DRONE001"
  
# Mission Parameters
mission:
  # Flight altitudes (meters)
  indoor_altitude: 1.5
  outdoor_altitude: 3.0
  takeoff_altitude: 2.0
  landing_altitude: 0.3
  
  # Timeouts (seconds)
  takeoff_timeout: 30
  landing_timeout: 45
  mission_timeout: 900  # 15 minutes total
  vision_timeout: 10
  waypoint_timeout: 60
  
  # Indoor mission parameters
  indoor:
    search_pattern: "grid"  # grid, spiral, line
    search_speed: 1.0  # m/s
    item_pickup_height: 0.8
    dropzone_height: 0.5
    max_search_time: 300  # 5 minutes
    
  # Outdoor mission parameters  
  outdoor:
    waypoint_radius: 2.0  # meters
    cruise_speed: 3.0  # m/s
    max_wind_speed: 5.0  # m/s
    gps_accuracy_threshold: 2.0  # meters
    
# Safety Parameters
safety:
  # Emergency limits
  max_altitude: 10.0
  min_altitude: 0.2
  max_velocity: 5.0
  max_acceleration: 3.0
  
  # Geofence (example coordinates - ADJUST FOR YOUR VENUE)
  geofence:
    enabled: true
    latitude_min: -6.370000  # South boundary
    latitude_max: -6.360000  # North boundary  
    longitude_min: 106.820000  # West boundary
    longitude_max: 106.830000  # East boundary
    
  # Battery monitoring
  battery:
    min_voltage: 14.4  # 4S LiPo minimum
    critical_voltage: 14.0
    warning_percentage: 25
    critical_percentage: 15
    
  # Failsafe behaviors
  failsafe:
    no_gps_action: "LAND"  # LAND, RTL, HOLD
    low_battery_action: "RTL"
    geofence_action: "RTL"
    communication_loss_action: "RTL"
    
# Vision System Parameters
vision:
  # YOLO model settings
  model_path: "yolov8n.pt"  # or path to custom model
  confidence_threshold: 0.5
  nms_threshold: 0.4
  input_size: [640, 640]
  
  # Detection classes for KAERTEI competition
  classes:
    - "item"        # Items to pickup
    - "dropzone"    # Drop zones  
    - "exit"        # Exit markers
    - "obstacle"    # Obstacles to avoid
    - "landing"     # Landing pads
    
  # Camera settings
  cameras:
    front:
      device_id: 0
      resolution: [640, 480]
      fps: 30
      auto_exposure: true
      
    back:
      device_id: 1  
      resolution: [640, 480]
      fps: 30
      auto_exposure: true
      
    top:
      device_id: 2
      resolution: [640, 480] 
      fps: 30
      auto_exposure: true
      
# Sensor Parameters
sensors:
  # ToF sensors
  tof:
    max_range: 4.0  # meters
    min_range: 0.1  # meters
    field_of_view: 25  # degrees
    update_rate: 20  # Hz
    
    # I2C addresses
    left_address: 0x29
    right_address: 0x30
    front_address: 0x31
    
  # GPS settings
  gps:
    fix_timeout: 30  # seconds
    min_satellites: 6
    accuracy_threshold: 2.0  # meters
    moving_threshold: 0.5  # m/s
    
# Hardware Control
hardware:
  # Magnet control
  magnets:
    magnet1:
      gpio_pin: 18
      relay_type: "NO"  # NO (Normally Open) or NC (Normally Closed)
      hold_current: 1.5  # Amperes
      
    magnet2:
      gpio_pin: 19
      relay_type: "NO"
      hold_current: 1.5
      
  # LED indicators
  leds:
    status_pin: 20
    error_pin: 21
    mission_pin: 22
    
# Navigation Parameters
navigation:
  # Path planning
  path_planner: "rrt_star"  # rrt, rrt_star, a_star
  waypoint_tolerance: 1.0  # meters
  heading_tolerance: 15  # degrees
  
  # Obstacle avoidance
  obstacle_avoidance:
    enabled: true
    detection_range: 3.0  # meters
    avoidance_distance: 1.5  # meters
    max_avoidance_angle: 60  # degrees
    
  # Local positioning
  local_position:
    origin_lat: -6.365000  # Set to competition venue
    origin_lon: 106.825000  # Set to competition venue
    origin_alt: 50.0  # meters above sea level
    
# Communication Parameters  
communication:
  # MAVROS settings
  mavros:
    fcu_url: "serial:///dev/ttyUSB0:57600"
    gcs_url: "udp://@127.0.0.1:14550"
    system_id: 1
    component_id: 1
    
  # Telemetry
  telemetry:
    ground_station_ip: "192.168.1.100"
    telemetry_port: 14550
    heartbeat_rate: 1  # Hz
    position_rate: 5  # Hz
    
# Competition Specific
competition_rules:
  # Scoring system
  scoring:
    item_pickup_points: 10
    correct_dropzone_points: 15
    time_bonus_per_second: 0.1
    penalty_per_crash: -50
    
  # Arena specifications  
  arena:
    indoor_size: [10, 10, 3]  # L x W x H meters
    outdoor_size: [50, 50, 10]  # L x W x H meters
    transition_zone: [2, 2, 3]  # Size of indoor/outdoor transition
    
  # Mission requirements
  requirements:
    min_items_pickup: 2
    min_dropzones_visit: 2
    max_mission_time: 900  # seconds
    required_landing_accuracy: 1.0  # meters
    
# Logging and Debugging
logging:
  # Log levels: DEBUG, INFO, WARN, ERROR
  console_level: "INFO"
  file_level: "DEBUG"
  log_directory: "~/ros2_logs"
  
  # What to log
  log_topics:
    - "/mavros/state"
    - "/mission/state" 
    - "/vision/detection"
    - "/gps/moving_status"
    - "/sensors/tof_*"
    
  # Bag recording
  bag_recording:
    enabled: true
    topics: "all"  # or list of specific topics
    max_size_gb: 5
    
# Development and Testing
development:
  # Simulation mode
  simulation:
    enabled: false
    gazebo_world: "competition_arena.world"
    use_mocap: false
    
  # Mock hardware
  mock_hardware:
    cameras: false
    sensors: false  
    magnets: false
    gps: false
    
  # Debug visualization
  visualization:
    rviz_config: "drone_mvp.rviz"
    plot_trajectory: true
    show_detections: true
    show_sensors: true
